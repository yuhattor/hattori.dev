---
title: "マルチリポジトリのバリアント解析：GitHub全体でセキュリティ調査を行うための強力な新手法"
subtitle: "マルチリポジトリのバリアント解析により、数千のリポジトリにまたがるセキュリティ調査を拡張し、新たに発見された脆弱性を発見し対応するための強力なツールを提供します。"
englishsubtitle: "Multi-repository variant analysis lets you scale security research across thousands of repositories, giving you a powerful tool to find and respond to newly discovered vulnerabilities."
englishtitle: "Multi-repository variant analysis: a powerful new way to perform security research across GitHub"
date: "2023-03-09"
cardurl: "https://github.blog/2023-03-09-multi-repository-variant-analysis-a-powerful-new-way-to-perform-security-research-across-github/"
author: "Walker Chabbott"
description: " The security community identifies new vulnerabilities at an astonishing rate and helps developers all over the world secure their code. GitHub is actively facilitating this collaboration with tools like private vulnerability reporting and the GitHub Advisory Database . Today, we’re announcing the next big step in our mission to help the community secure the world’s code: multi-repository variant analysis (MRVA).  Variant analysis is an important technique for identifying new types of security vulnerabilities. CodeQL, the static analysis engine that powers code scanning, is a great tool for variant analysis because it allows you to model vulnerabilities as highly precise custom CodeQL queries. The use of queries offers a deep level of customization, allowing security researchers the flexibility to find exactly what they’re looking for. MRVA scales this deep analysis capability: with many thousands of repositories at your fingertips, it’s now easy to scale variant analysis across large numbers of codebases, saving time and allowing you to rapidly hunt for new vulnerabilities.  GitHub’s own Security Lab has already been leveraging multi-repository variant analysis to detect new vulnerabilities, including recent Android advisories that affected over 10 million applications. For a full list of the vulnerabilities our Security Lab uncovered, check out the advisories page .  How does"
coverimage: "https://github.blog/wp-content/uploads/2022/08/Security-Product@2x.png?resize=1600%2C850"
category: "Security,code scanning,CodeQL,GitHub Advanced Security,SAST"
englishsummary: " MRVA work?  GitHub is facilitating collaboration between the security community and developers to identify new security vulnerabilities with tools like private vulnerability reporting, the GitHub Advisory Database, and multi-repository variant analysis (MRVA)."
summary: "MRVAの効果？  GitHubは、プライベート脆弱性報告、GitHub Advisory Database、マルチリポジトリバリアント解析（MRVA）などのツールにより、セキュリティコミュニティと開発者のコラボレーションを促進し、新しいセキュリティ脆弱性を特定します。"
---

<p>セキュリティコミュニティは驚くほどの速さで新しい脆弱性を特定し、世界中の開発者のコードの安全確保に貢献しています。GitHubは、<a href="https://docs.github.com/en/code-security/security-advisories/guidance-on-reporting-and-writing/privately-reporting-a-security-vulnerability">プライベートな脆弱性報告や</a> <a href="https://github.com/advisories">GitHub Advisory Databaseなどの</a>ツールによって、このコラボレーションを積極的に促進させています。今日、私たちは、コミュニティが世界中のコードの安全を確保するためのミッションの次の大きなステップ、マルチ・リポジトリ・バリアント解析（MRVA）を発表します。</p>
<p>バリアント解析は、新しいタイプのセキュリティ脆弱性を特定するための重要な技術です。コードスキャンを強化する静的解析エンジンであるCodeQLは、精度の高いカスタムCodeQLクエリとして脆弱性をモデル化できるため、バリアント解析に最適なツールです。クエリを使用することで、深いレベルのカスタマイズが可能になり、セキュリティ研究者は探しているものを正確に見つけることができる柔軟性を得ることができます。MRVAは、この深い分析機能を拡張します。何千ものリポジトリを指先で操作することで、大量のコードベースにわたってバリアント分析を簡単に拡張できるようになり、時間を節約して新しい脆弱性を迅速に探索できるようになりました。</p>
<p>GitHubのセキュリティラボでは、すでにマルチリポジトリのバリアント解析を活用して、1000万以上のアプリケーションに影響を与えた最近の<a href="https://securitylab.github.com/advisories/GHSL-2022-059_GHSL-2022-060_Owncloud_Android_app/">Android</a>アドバイザリーなど、新しい脆弱性の検出を実現しています。私たちのセキュリティラボが発見した脆弱性の全リストは、<a href="https://securitylab.github.com/advisories/">アドバイザリーページを</a>ご覧ください。</p>
<h2 id="how-does-variant-analysis-work-with-codeql">CodeQLでバリアント解析はどのように機能するのですか？<a href="#how-does-variant-analysis-work-with-codeql" class="heading-link pl-2 text-italic text-bold" aria-label="How does variant analysis work with CodeQL?"></a></h2>
<p>コードベースに対して CodeQL クエリーを実行すると、モデル化した元の問題を特定するだけでなく、その問題の論理的な亜種をピックアップして、脆弱性のクラス全体を一度に特定することができます。この手法は、新しい脆弱性、特に既知の脆弱性や攻撃パターンに基づく脆弱性を特定・分析する際に有効です。</p>
<p>MRVAの文脈では、特定のソフトウェアパッケージの既知の脆弱性に基づくエクスプロイトが疑われる場合、コミュニティの研究者はコードベース全体を分析し、そのコードをエクスプロイトの既知の亜種と比較できます。両者の類似点と相違点を特定することで、エクスプロイトの仕組みや、攻撃を防止または軽減するためにどのような手段を講じることができるのかについての洞察を得ることができます。</p>
<h2 id="how-to-get-started-using-multi-repository-variant-analysis">マルチリポジトリ型バリアント解析の使用開始方法<a href="#how-to-get-started-using-multi-repository-variant-analysis" class="heading-link pl-2 text-italic text-bold" aria-label="How to get started using multi-repository variant analysis"></a></h2>
<p>MRVA で CodeQL クエリを実行することは、<a href="https://marketplace.visualstudio.com/items?itemName=GitHub.vscode-codeql">CodeQL for Visual Studio Code（VS Code</a>）で 1 つのコードベースに対してクエリを実行することと非常に似ています。クエリーは CodeQL データベースに対して実行され、コードの構文構造、データフロー グラフ、および制御フロー グラフに関するクエリー可能な情報を含むコードベースの表現である。</p>
<p>MRVAでは、最大1,000のリポジトリのリストに対してCodeQLクエリーを実行することができます。MRVA は、各リポジトリの CodeQL データベースを VS Code にダウンロードするのではなく、<a href="https://github.com/features/actions">GitHub アクションを</a>トリガーしてすべての CodeQL データベースを取得し、各リポジトリに対してクエリーを実行します。各クエリが完了すると、その結果がVS Codeに返され、探索できるようになります。</p>
<p><img decoding="async" src="https://github.blog/wp-content/uploads/2023/03/multivariant-1.png?w=1024&#038;resize=1024%2C727" alt="multi repository variant analysis results display in VS Code" width="1024" height="727" class="aligncenter size-large wp-image-70411 width-fit" srcset="https://github.blog/wp-content/uploads/2023/03/multivariant-1.png?w=1350 1350w, https://github.blog/wp-content/uploads/2023/03/multivariant-1.png?w=300 300w, https://github.blog/wp-content/uploads/2023/03/multivariant-1.png?w=768 768w, https://github.blog/wp-content/uploads/2023/03/multivariant-1.png?w=1024&#038;resize=1024%2C727 1024w, https://github.blog/wp-content/uploads/2023/03/multivariant-1.png?w=515 515w" sizes="(max-width: 1000px) 100vw, 1000px" data-recalc-dims="1" /></p>
<p>MRVA は、CodeQL クエリを簡単にテストできるように、10、100、および 1,000 のパブリック リポジトリのリストを自動的に作成します。これらのリストはGitHubのコード検索チームと共同で開発されたもので、CodeQLがサポートする各言語のさまざまなOSSリポジトリが含まれています。異なるリポジトリをターゲットにしたい場合は、<a href="https://codeql.github.com/docs/codeql-for-visual-studio-code/running-codeql-queries-at-scale-with-mrva">カスタムリストの作成も</a>サポートしていますし、1つのGitHub組織で最大1,000のリポジトリに対してMRVA実行をトリガーすることも可能です。</p>
<p>結果が出たら、スター数や最終更新時刻でリポジトリをソートすることで、最も気になるアラートを見つけることができます。同僚やプロジェクト管理者と共有したい結果が見つかった場合は、「結果のエクスポート」機能を使って、軽量なMarkdownレポートを簡単に作成できます。</p>
<h2 id="which-repositories-are-available-for-multi-repository-variant-analysis">マルチリポジトリのバリアント解析に利用できるリポジトリは？<a href="#which-repositories-are-available-for-multi-repository-variant-analysis" class="heading-link pl-2 text-italic text-bold" aria-label="Which repositories are available for multi-repository variant analysis?"></a></h2>
<p>公開リポジトリについては、GitHub コードスキャンを実行するすべてのリポジトリに対して CodeQL データベースを保存します。つまり、公開リポジトリをMRVAで利用できるようにしたい場合は、<a href="https://docs.github.com/en/code-security/code-scanning/automatically-scanning-your-code-for-vulnerabilities-and-errors/configuring-code-scanning-for-a-repository">CodeQLでコードスキャンを有効に</a>するだけでよいのです。</p>
<p>しかし、CodeQLでコードスキャンを実行していないリポジトリに対してバリアント分析を実行する柔軟性も与えたいと考えています。このため、GitHub.comの何千もの公開リポジトリのうち、コードスキャンが有効になっていないリポジトリに対してCodeQLデータベースを保存しています。私たちはこれらのリポジトリをMRVAで利用できるようにし、CodeQLコミュニティがオープンソースソフトウェアの安全性を保つのを支援できるようにしました！まるでステロイドのコード検索のようです。MRVAで利用可能なリポジトリのリストは、CodeQLを使ったセキュリティ研究に最も関連性の高いリポジトリが利用できるように、常に進化しています。</p>
<p>また、CodeQLによるコードスキャンが有効になっている限り、MRVAを使用して、読み取りアクセス権を持つ任意のプライベートリポジトリを分析することができます。そのため、新しい脆弱性を検出するために CodeQL クエリを開発した場合、MRVA を使用して組織のポートフォリオ全体のバグを特定し、排除することも可能です。</p>
<p>マルチリポジトリバリアント解析のセットアップと活用方法の詳細については、当社の<a href="https://codeql.github.com/docs/codeql-for-visual-studio-code/running-codeql-queries-at-scale-with-mrva">ドキュメントを</a>参照してください。</p>
<aside class="p-4 p-md-6 post-aside--large"><p class="h5-mktg gh-aside-title">GitHubのセキュリティソリューションについてもっと知る</p><p>GitHubは、開発者の体験を損なうことなく、より安全でセキュアなソフトウェアの構築を支援することを約束します。GitHubのセキュリティ機能をリポジトリで有効にする方法については、<a href="https://docs.github.com/en/enterprise-cloud@latest/code-security/getting-started/github-security-features">スタートガイドを</a>ご覧ください。</p>
</aside>


